import { engine, Material, Transform, Vector3, MeshRenderer, Billboard, TextShape, Color3, Color4, Schemas } from '@dcl/ecs';
function createPlaneTexture(x, y, z) {
    const meshEntity = engine.addEntity();
    Material.create(meshEntity, {
        material: {
            $case: 'pbr',
            pbr: {
                texture: {
                    tex: {
                        $case: 'texture',
                        texture: { src: 'models/polaroid2.png' }
                    }
                }
            }
        }
    });
    Transform.create(meshEntity, {
        position: { x, y, z },
        scale: Vector3.create(2, 2, 2)
    });
    MeshRenderer.create(meshEntity, {
        mesh: {
            $case: 'plane',
            plane: {
                uvs: [...Array.from({ length: 40 }, () => 0), 0, 1, 1, 1, 1, 0, 0, 0]
            }
        }
    });
    return meshEntity;
}
function createBillboards() {
    const plane1 = createPlaneTexture(8, 3, 1);
    const plane2 = createPlaneTexture(12, 3, 1);
    createPlaneTexture(4, 3, 1);
    const plane5 = createPlaneTexture(8, 3, 8);
    const plane4 = createPlaneTexture(12, 3, 8);
    createPlaneTexture(4, 3, 8);
    Billboard.create(plane1, {
        billboardMode: 1
    });
    Billboard.create(plane2);
    Billboard.create(plane4, {
        oppositeDirection: true,
        billboardMode: 0
    });
    Billboard.create(plane5, {
        oppositeDirection: true,
        billboardMode: 1
    });
}
function createTextShape(text, position, textColor) {
    const entity = engine.addEntity();
    Transform.create(entity, { position });
    return TextShape.create(entity, {
        text,
        fontSize: 3,
        outlineWidth: 0.1,
        outlineColor: Color3.Black(),
        textColor
    });
}
function createTextShapes() {
    const regularColor = Color4.create(1, 0.2, 0.8, 0.8);
    const oppositeColor = Color4.create(0.8, 0.2, 1, 0.8);
    createTextShape('Regular, only Y-rotation', Vector3.create(8, 1, 1), regularColor);
    createTextShape('Regular', Vector3.create(12, 1, 1), regularColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 1), regularColor);
    createTextShape('Opposite, only Y', Vector3.create(8, 1, 8), oppositeColor);
    createTextShape('Opposite', Vector3.create(12, 1, 8), oppositeColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 8), oppositeColor);
}
createBillboards();
createTextShapes();
const BouncingBillboard = engine.defineComponent({
    t: Schemas.Number,
    originalPosition: Schemas.Vector3
}, 123123);
engine.addSystem((dt) => {
    for (const [entity] of engine.getEntitiesWith(Billboard, Transform)) {
        if (BouncingBillboard.getOrNull(entity) === null) {
            BouncingBillboard.create(entity, {
                originalPosition: Transform.get(entity).position
            });
        }
        const bounce = BouncingBillboard.getMutable(entity);
        bounce.t += dt;
        Transform.getMutable(entity).position.y =
            bounce.originalPosition.y + 0.05 * Math.sin(10 * bounce.t);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsTUFBTSxFQUNOLFFBQVEsRUFDUixTQUFTLEVBQ1QsT0FBTyxFQUNQLFlBQVksRUFDWixTQUFTLEVBRVQsU0FBUyxFQUNULE1BQU0sRUFDTixNQUFNLEVBQ04sT0FBTyxFQUNSLE1BQU0sVUFBVSxDQUFBO0FBRWpCLFNBQVMsa0JBQWtCLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO0lBQ3pELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQTtJQUVyQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtRQUMxQixRQUFRLEVBQUU7WUFDUixLQUFLLEVBQUUsS0FBSztZQUNaLEdBQUcsRUFBRTtnQkFDSCxPQUFPLEVBQUU7b0JBQ1AsR0FBRyxFQUFFO3dCQUNILEtBQUssRUFBRSxTQUFTO3dCQUNoQixPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsc0JBQXNCLEVBQUU7cUJBQ3pDO2lCQUNGO2FBQ0Y7U0FDRjtLQUNGLENBQUMsQ0FBQTtJQUNGLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1FBQzNCLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1FBQ3JCLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQy9CLENBQUMsQ0FBQTtJQUNGLFlBQVksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1FBQzlCLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFO2dCQUNMLEdBQUcsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxD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ZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEVudGl0eSxcbiAgZW5naW5lLFxuICBNYXRlcmlhbCxcbiAgVHJhbnNmb3JtLFxuICBWZWN0b3IzLFxuICBNZXNoUmVuZGVyZXIsXG4gIEJpbGxib2FyZCxcbiAgQmlsbGJvYXJkTW9kZSxcbiAgVGV4dFNoYXBlLFxuICBDb2xvcjMsXG4gIENvbG9yNCxcbiAgU2NoZW1hc1xufSBmcm9tICdAZGNsL2VjcydcblxuZnVuY3Rpb24gY3JlYXRlUGxhbmVUZXh0dXJlKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpOiBFbnRpdHkge1xuICBjb25zdCBtZXNoRW50aXR5ID0gZW5naW5lLmFkZEVudGl0eSgpXG5cbiAgTWF0ZXJpYWwuY3JlYXRlKG1lc2hFbnRpdHksIHtcbiAgICBtYXRlcmlhbDoge1xuICAgICAgJGNhc2U6ICdwYnInLFxuICAgICAgcGJyOiB7XG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICB0ZXg6IHtcbiAgICAgICAgICAgICRjYXNlOiAndGV4dHVyZScsXG4gICAgICAgICAgICB0ZXh0dXJlOiB7IHNyYzogJ21vZGVscy9wb2xhcm9pZDIucG5nJyB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuICBUcmFuc2Zvcm0uY3JlYXRlKG1lc2hFbnRpdHksIHtcbiAgICBwb3NpdGlvbjogeyB4LCB5LCB6IH0sXG4gICAgc2NhbGU6IFZlY3RvcjMuY3JlYXRlKDIsIDIsIDIpXG4gIH0pXG4gIE1lc2hSZW5kZXJlci5jcmVhdGUobWVzaEVudGl0eSwge1xuICAgIG1lc2g6IHtcbiAgICAgICRjYXNlOiAncGxhbmUnLFxuICAgICAgcGxhbmU6IHtcbiAgICAgICAgdXZzOiBbLi4uQXJyYXkuZnJvbSh7IGxlbmd0aDogNDAgfSwgKCkgPT4gMCksIDAsIDEsIDEsIDEsIDEsIDAsIDAsIDBdXG4gICAgICB9XG4gICAgfVxuICB9KVxuICByZXR1cm4gbWVzaEVudGl0eVxufVxuXG5mdW5jdGlvbiBjcmVhdGVCaWxsYm9hcmRzKCkge1xuICBjb25zdCBwbGFuZTEgPSBjcmVhdGVQbGFuZVRleHR1cmUoOCwgMywgMSlcbiAgY29uc3QgcGxhbmUyID0gY3JlYXRlUGxhbmVUZXh0dXJlKDEyLCAzLCAxKVxuICBjcmVhdGVQbGFuZVRleHR1cmUoNCwgMywgMSlcblxuICBjb25zdCBwbGFuZTUgPSBjcmVhdGVQbGFuZVRleHR1cmUoOCwgMywgOClcbiAgY29uc3QgcGxhbmU0ID0gY3JlYXRlUGxhbmVUZXh0dXJlKDEyLCAzLCA4KVxuICBjcmVhdGVQbGFuZVRleHR1cmUoNCwgMywgOClcblxuICBCaWxsYm9hcmQuY3JlYXRlKHBsYW5lMSwge1xuICAgIGJpbGxib2FyZE1vZGU6IEJpbGxib2FyZE1vZGUuQk1fWV9BWEVcbiAgfSlcbiAgQmlsbGJvYXJkLmNyZWF0ZShwbGFuZTIpXG4gIEJpbGxib2FyZC5jcmVhdGUocGxhbmU0LCB7XG4gICAgb3Bwb3NpdGVEaXJlY3Rpb246IHRydWUsXG4gICAgYmlsbGJvYXJkTW9kZTogQmlsbGJvYXJkTW9kZS5CTV9BTExfQVhFU1xuICB9KVxuICBCaWxsYm9hcmQuY3JlYXRlKHBsYW5lNSwge1xuICAgIG9wcG9zaXRlRGlyZWN0aW9uOiB0cnVlLFxuICAgIGJpbGxib2FyZE1vZGU6IEJpbGxib2FyZE1vZGUuQk1fWV9BWEVcbiAgfSlcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGV4dFNoYXBlKHRleHQ6IHN0cmluZywgcG9zaXRpb246IFZlY3RvcjMsIHRleHRDb2xvcjogQ29sb3I0KSB7XG4gIGNvbnN0IGVudGl0eSA9IGVuZ2luZS5hZGRFbnRpdHkoKVxuICBUcmFuc2Zvcm0uY3JlYXRlKGVudGl0eSwgeyBwb3NpdGlvbiB9KVxuICByZXR1cm4gVGV4dFNoYXBlLmNyZWF0ZShlbnRpdHksIHtcbiAgICB0ZXh0LFxuICAgIGZvbnRTaXplOiAzLFxuICAgIG91dGxpbmVXaWR0aDogMC4xLFxuICAgIG91dGxpbmVDb2xvcjogQ29sb3IzLkJsYWNrKCksXG4gICAgdGV4dENvbG9yXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRTaGFwZXMoKSB7XG4gIGNvbnN0IHJlZ3VsYXJDb2xvciA9IENvbG9yNC5jcmVhdGUoMSwgMC4yLCAwLjgsIDAuOClcbiAgY29uc3Qgb3Bwb3NpdGVDb2xvciA9IENvbG9yNC5jcmVhdGUoMC44LCAwLjIsIDEsIDAuOClcblxuICBjcmVhdGVUZXh0U2hhcGUoXG4gICAgJ1JlZ3VsYXIsIG9ubHkgWS1yb3RhdGlvbicsXG4gICAgVmVjdG9yMy5jcmVhdGUoOCwgMSwgMSksXG4gICAgcmVndWxhckNvbG9yXG4gIClcbiAgY3JlYXRlVGV4dFNoYXBlKCdSZWd1bGFyJywgVmVjdG9yMy5jcmVhdGUoMTIsIDEsIDEpLCByZWd1bGFyQ29sb3IpXG4gIGNyZWF0ZVRleHRTaGFwZSgnV2l0aG91dCBiaWxsYm9hcmQnLCBWZWN0b3IzLmNyZWF0ZSg0LCAxLCAxKSwgcmVndWxhckNvbG9yKVxuICBjcmVhdGVUZXh0U2hhcGUoJ09wcG9zaXRlLCBvbmx5IFknLCBWZWN0b3IzLmNyZWF0ZSg4LCAxLCA4KSwgb3Bwb3NpdGVDb2xvcilcbiAgY3JlYXRlVGV4dFNoYXBlKCdPcHBvc2l0ZScsIFZlY3RvcjMuY3JlYXRlKDEyLCAxLCA4KSwgb3Bwb3NpdGVDb2xvcilcbiAgY3JlYXRlVGV4dFNoYXBlKCdXaXRob3V0IGJpbGxib2FyZCcsIFZlY3RvcjMuY3JlYXRlKDQsIDEsIDgpLCBvcHBvc2l0ZUNvbG9yKVxufVxuXG5jcmVhdGVCaWxsYm9hcmRzKClcbmNyZWF0ZVRleHRTaGFwZXMoKVxuXG5jb25zdCBCb3VuY2luZ0JpbGxib2FyZCA9IGVuZ2luZS5kZWZpbmVDb21wb25lbnQoXG4gIHtcbiAgICB0OiBTY2hlbWFzLk51bWJlcixcbiAgICBvcmlnaW5hbFBvc2l0aW9uOiBTY2hlbWFzLlZlY3RvcjNcbiAgfSxcbiAgMTIzMTIzXG4pXG5cbmVuZ2luZS5hZGRTeXN0ZW0oKGR0OiBudW1iZXIpID0+IHtcbiAgZm9yIChjb25zdCBbZW50aXR5XSBvZiBlbmdpbmUuZ2V0RW50aXRpZXNXaXRoKEJpbGxib2FyZCwgVHJhbnNmb3JtKSkge1xuICAgIGlmIChCb3VuY2luZ0JpbGxib2FyZC5nZXRPck51bGwoZW50aXR5KSA9PT0gbnVsbCkge1xuICAgICAgQm91bmNpbmdCaWxsYm9hcmQuY3JlYXRlKGVudGl0eSwge1xuICAgICAgICBvcmlnaW5hbFBvc2l0aW9uOiBUcmFuc2Zvcm0uZ2V0KGVudGl0eSkucG9zaXRpb25cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgYm91bmNlID0gQm91bmNpbmdCaWxsYm9hcmQuZ2V0TXV0YWJsZShlbnRpdHkpXG4gICAgYm91bmNlLnQgKz0gZHRcblxuICAgIFRyYW5zZm9ybS5nZXRNdXRhYmxlKGVudGl0eSkucG9zaXRpb24ueSA9XG4gICAgICBib3VuY2Uub3JpZ2luYWxQb3NpdGlvbi55ICsgMC4wNSAqIE1hdGguc2luKDEwICogYm91bmNlLnQpXG4gIH1cbn0pXG4iXX0=