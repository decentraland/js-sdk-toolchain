import { engine, Material, Transform, MeshRenderer, Billboard, TextShape, Schemas } from '@dcl/sdk/ecs';
import { Vector3, Color3, Color4 } from '@dcl/sdk/math';
function createPlaneTexture(x, y, z) {
    const meshEntity = engine.addEntity();
    Material.create(meshEntity, {
        material: {
            $case: 'pbr',
            pbr: {
                texture: {
                    tex: {
                        $case: 'texture',
                        texture: { src: 'models/polaroid2.png' }
                    }
                }
            }
        }
    });
    Transform.create(meshEntity, {
        position: { x, y, z },
        scale: Vector3.create(2, 2, 2)
    });
    MeshRenderer.create(meshEntity, {
        mesh: {
            $case: 'plane',
            plane: {
                uvs: [...Array.from({ length: 40 }, () => 0), 0, 1, 1, 1, 1, 0, 0, 0]
            }
        }
    });
    return meshEntity;
}
function createBillboards() {
    const plane1 = createPlaneTexture(8, 3, 1);
    const plane2 = createPlaneTexture(12, 3, 1);
    createPlaneTexture(4, 3, 1);
    const plane5 = createPlaneTexture(8, 3, 8);
    const plane4 = createPlaneTexture(12, 3, 8);
    createPlaneTexture(4, 3, 8);
    Billboard.create(plane1, {
        billboardMode: 1
    });
    Billboard.create(plane2);
    Billboard.create(plane4, {
        oppositeDirection: true,
        billboardMode: 0
    });
    Billboard.create(plane5, {
        oppositeDirection: true,
        billboardMode: 1
    });
}
function createTextShape(text, position, textColor) {
    const entity = engine.addEntity();
    Transform.create(entity, { position });
    return TextShape.create(entity, {
        text,
        fontSize: 3,
        outlineWidth: 0.1,
        outlineColor: Color3.Black(),
        textColor
    });
}
function createTextShapes() {
    const regularColor = Color4.create(1, 0.2, 0.8, 0.8);
    const oppositeColor = Color4.create(0.8, 0.2, 1, 0.8);
    createTextShape('Regular, only Y-rotation', Vector3.create(8, 1, 1), regularColor);
    createTextShape('Regular', Vector3.create(12, 1, 1), regularColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 1), regularColor);
    createTextShape('Opposite, only Y', Vector3.create(8, 1, 8), oppositeColor);
    createTextShape('Opposite', Vector3.create(12, 1, 8), oppositeColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 8), oppositeColor);
}
createBillboards();
createTextShapes();
const BouncingBillboard = engine.defineComponent({
    t: Schemas.Number,
    originalPosition: Schemas.Vector3
}, 123123);
engine.addSystem((dt) => {
    for (const [entity] of engine.getEntitiesWith(Billboard, Transform)) {
        if (BouncingBillboard.getOrNull(entity) === null) {
            BouncingBillboard.create(entity, {
                originalPosition: Transform.get(entity).position
            });
        }
        const bounce = BouncingBillboard.getMutable(entity);
        bounce.t += dt;
        Transform.getMutable(entity).position.y =
            bounce.originalPosition.y + 0.05 * Math.sin(10 * bounce.t);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsTUFBTSxFQUNOLFFBQVEsRUFDUixTQUFTLEVBQ1QsWUFBWSxFQUNaLFNBQVMsRUFFVCxTQUFTLEVBQ1QsT0FBTyxFQUNSLE1BQU0sY0FBYyxDQUFBO0FBQ3JCLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQTtBQUV2RCxTQUFTLGtCQUFrQixDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBUztJQUN6RCxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUE7SUFFckMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUU7UUFDMUIsUUFBUSxFQUFFO1lBQ1IsS0FBSyxFQUFFLEtBQUs7WUFDWixHQUFHLEVBQUU7Z0JBQ0gsT0FBTyxFQUFFO29CQUNQLEdBQUcsRUFBRTt3QkFDSCxLQUFLLEVBQUUsU0FBUzt3QkFDaEIsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLHNCQUFzQixFQUFFO3FCQUN6QztpQkFDRjthQUNGO1NBQ0Y7S0FDRixDQUFDLENBQUE7SUFDRixTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtRQUMzQixRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtRQUNyQixLQUFLLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUMvQixDQUFDLENBQUE7SUFDRixZQUFZLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtRQUM5QixJQUFJLEVBQUU7WUFDSixLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRTtnQkFDTCxHQUFHLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUs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QzdEO0FBQ0gsQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIGVuZ2luZSxcbiAgTWF0ZXJpYWwsXG4gIFRyYW5zZm9ybSxcbiAgTWVzaFJlbmRlcmVyLFxuICBCaWxsYm9hcmQsXG4gIEJpbGxib2FyZE1vZGUsXG4gIFRleHRTaGFwZSxcbiAgU2NoZW1hc1xufSBmcm9tICdAZGNsL3Nkay9lY3MnXG5pbXBvcnQgeyBWZWN0b3IzLCBDb2xvcjMsIENvbG9yNCB9IGZyb20gJ0BkY2wvc2RrL21hdGgnXG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYW5lVGV4dHVyZSh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKTogRW50aXR5IHtcbiAgY29uc3QgbWVzaEVudGl0eSA9IGVuZ2luZS5hZGRFbnRpdHkoKVxuXG4gIE1hdGVyaWFsLmNyZWF0ZShtZXNoRW50aXR5LCB7XG4gICAgbWF0ZXJpYWw6IHtcbiAgICAgICRjYXNlOiAncGJyJyxcbiAgICAgIHBicjoge1xuICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgdGV4OiB7XG4gICAgICAgICAgICAkY2FzZTogJ3RleHR1cmUnLFxuICAgICAgICAgICAgdGV4dHVyZTogeyBzcmM6ICdtb2RlbHMvcG9sYXJvaWQyLnBuZycgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgVHJhbnNmb3JtLmNyZWF0ZShtZXNoRW50aXR5LCB7XG4gICAgcG9zaXRpb246IHsgeCwgeSwgeiB9LFxuICAgIHNjYWxlOiBWZWN0b3IzLmNyZWF0ZSgyLCAyLCAyKVxuICB9KVxuICBNZXNoUmVuZGVyZXIuY3JlYXRlKG1lc2hFbnRpdHksIHtcbiAgICBtZXNoOiB7XG4gICAgICAkY2FzZTogJ3BsYW5lJyxcbiAgICAgIHBsYW5lOiB7XG4gICAgICAgIHV2czogWy4uLkFycmF5LmZyb20oeyBsZW5ndGg6IDQwIH0sICgpID0+IDApLCAwLCAxLCAxLCAxLCAxLCAwLCAwLCAwXVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIG1lc2hFbnRpdHlcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmlsbGJvYXJkcygpIHtcbiAgY29uc3QgcGxhbmUxID0gY3JlYXRlUGxhbmVUZXh0dXJlKDgsIDMsIDEpXG4gIGNvbnN0IHBsYW5lMiA9IGNyZWF0ZVBsYW5lVGV4dHVyZSgxMiwgMywgMSlcbiAgY3JlYXRlUGxhbmVUZXh0dXJlKDQsIDMsIDEpXG5cbiAgY29uc3QgcGxhbmU1ID0gY3JlYXRlUGxhbmVUZXh0dXJlKDgsIDMsIDgpXG4gIGNvbnN0IHBsYW5lNCA9IGNyZWF0ZVBsYW5lVGV4dHVyZSgxMiwgMywgOClcbiAgY3JlYXRlUGxhbmVUZXh0dXJlKDQsIDMsIDgpXG5cbiAgQmlsbGJvYXJkLmNyZWF0ZShwbGFuZTEsIHtcbiAgICBiaWxsYm9hcmRNb2RlOiBCaWxsYm9hcmRNb2RlLkJNX1lfQVhFXG4gIH0pXG4gIEJpbGxib2FyZC5jcmVhdGUocGxhbmUyKVxuICBCaWxsYm9hcmQuY3JlYXRlKHBsYW5lNCwge1xuICAgIG9wcG9zaXRlRGlyZWN0aW9uOiB0cnVlLFxuICAgIGJpbGxib2FyZE1vZGU6IEJpbGxib2FyZE1vZGUuQk1fQUxMX0FYRVNcbiAgfSlcbiAgQmlsbGJvYXJkLmNyZWF0ZShwbGFuZTUsIHtcbiAgICBvcHBvc2l0ZURpcmVjdGlvbjogdHJ1ZSxcbiAgICBiaWxsYm9hcmRNb2RlOiBCaWxsYm9hcmRNb2RlLkJNX1lfQVhFXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRTaGFwZSh0ZXh0OiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzLCB0ZXh0Q29sb3I6IENvbG9yNCkge1xuICBjb25zdCBlbnRpdHkgPSBlbmdpbmUuYWRkRW50aXR5KClcbiAgVHJhbnNmb3JtLmNyZWF0ZShlbnRpdHksIHsgcG9zaXRpb24gfSlcbiAgcmV0dXJuIFRleHRTaGFwZS5jcmVhdGUoZW50aXR5LCB7XG4gICAgdGV4dCxcbiAgICBmb250U2l6ZTogMyxcbiAgICBvdXRsaW5lV2lkdGg6IDAuMSxcbiAgICBvdXRsaW5lQ29sb3I6IENvbG9yMy5CbGFjaygpLFxuICAgIHRleHRDb2xvclxuICB9KVxufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXh0U2hhcGVzKCkge1xuICBjb25zdCByZWd1bGFyQ29sb3IgPSBDb2xvcjQuY3JlYXRlKDEsIDAuMiwgMC44LCAwLjgpXG4gIGNvbnN0IG9wcG9zaXRlQ29sb3IgPSBDb2xvcjQuY3JlYXRlKDAuOCwgMC4yLCAxLCAwLjgpXG5cbiAgY3JlYXRlVGV4dFNoYXBlKFxuICAgICdSZWd1bGFyLCBvbmx5IFktcm90YXRpb24nLFxuICAgIFZlY3RvcjMuY3JlYXRlKDgsIDEsIDEpLFxuICAgIHJlZ3VsYXJDb2xvclxuICApXG4gIGNyZWF0ZVRleHRTaGFwZSgnUmVndWxhcicsIFZlY3RvcjMuY3JlYXRlKDEyLCAxLCAxKSwgcmVndWxhckNvbG9yKVxuICBjcmVhdGVUZXh0U2hhcGUoJ1dpdGhvdXQgYmlsbGJvYXJkJywgVmVjdG9yMy5jcmVhdGUoNCwgMSwgMSksIHJlZ3VsYXJDb2xvcilcbiAgY3JlYXRlVGV4dFNoYXBlKCdPcHBvc2l0ZSwgb25seSBZJywgVmVjdG9yMy5jcmVhdGUoOCwgMSwgOCksIG9wcG9zaXRlQ29sb3IpXG4gIGNyZWF0ZVRleHRTaGFwZSgnT3Bwb3NpdGUnLCBWZWN0b3IzLmNyZWF0ZSgxMiwgMSwgOCksIG9wcG9zaXRlQ29sb3IpXG4gIGNyZWF0ZVRleHRTaGFwZSgnV2l0aG91dCBiaWxsYm9hcmQnLCBWZWN0b3IzLmNyZWF0ZSg0LCAxLCA4KSwgb3Bwb3NpdGVDb2xvcilcbn1cblxuY3JlYXRlQmlsbGJvYXJkcygpXG5jcmVhdGVUZXh0U2hhcGVzKClcblxuY29uc3QgQm91bmNpbmdCaWxsYm9hcmQgPSBlbmdpbmUuZGVmaW5lQ29tcG9uZW50KFxuICB7XG4gICAgdDogU2NoZW1hcy5OdW1iZXIsXG4gICAgb3JpZ2luYWxQb3NpdGlvbjogU2NoZW1hcy5WZWN0b3IzXG4gIH0sXG4gIDEyMzEyM1xuKVxuXG5lbmdpbmUuYWRkU3lzdGVtKChkdDogbnVtYmVyKSA9PiB7XG4gIGZvciAoY29uc3QgW2VudGl0eV0gb2YgZW5naW5lLmdldEVudGl0aWVzV2l0aChCaWxsYm9hcmQsIFRyYW5zZm9ybSkpIHtcbiAgICBpZiAoQm91bmNpbmdCaWxsYm9hcmQuZ2V0T3JOdWxsKGVudGl0eSkgPT09IG51bGwpIHtcbiAgICAgIEJvdW5jaW5nQmlsbGJvYXJkLmNyZWF0ZShlbnRpdHksIHtcbiAgICAgICAgb3JpZ2luYWxQb3NpdGlvbjogVHJhbnNmb3JtLmdldChlbnRpdHkpLnBvc2l0aW9uXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGJvdW5jZSA9IEJvdW5jaW5nQmlsbGJvYXJkLmdldE11dGFibGUoZW50aXR5KVxuICAgIGJvdW5jZS50ICs9IGR0XG5cbiAgICBUcmFuc2Zvcm0uZ2V0TXV0YWJsZShlbnRpdHkpLnBvc2l0aW9uLnkgPVxuICAgICAgYm91bmNlLm9yaWdpbmFsUG9zaXRpb24ueSArIDAuMDUgKiBNYXRoLnNpbigxMCAqIGJvdW5jZS50KVxuICB9XG59KVxuIl19