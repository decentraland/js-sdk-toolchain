import { engine, Material, Transform, Vector3, MeshRenderer, Billboard, TextShape, Color3, Color4, Schemas } from '@dcl/ecs';
function createPlaneTexture(x, y, z) {
    const meshEntity = engine.addEntity();
    Material.create(meshEntity, {
        material: {
            $case: 'pbr',
            pbr: {
                texture: {
                    tex: {
                        $case: 'texture',
                        texture: { src: 'models/polaroid2.png' }
                    }
                }
            }
        }
    });
    Transform.create(meshEntity, {
        position: { x, y, z },
        scale: Vector3.create(2, 2, 2)
    });
    MeshRenderer.create(meshEntity, {
        mesh: {
            $case: 'plane',
            plane: {
                uvs: [...Array.from({ length: 40 }, () => 0), 0, 1, 1, 1, 1, 0, 0, 0]
            }
        }
    });
    return meshEntity;
}
function createBillboards() {
    const plane1 = createPlaneTexture(8, 3, 1);
    const plane2 = createPlaneTexture(12, 3, 1);
    createPlaneTexture(4, 3, 1);
    const plane5 = createPlaneTexture(8, 3, 8);
    const plane4 = createPlaneTexture(12, 3, 8);
    createPlaneTexture(4, 3, 8);
    Billboard.create(plane1, {
        billboardMode: 1
    });
    Billboard.create(plane2);
    Billboard.create(plane4, {
        oppositeDirection: true,
        billboardMode: 0
    });
    Billboard.create(plane5, {
        oppositeDirection: true,
        billboardMode: 1
    });
}
function createTextShape(text, position, textColor) {
    const entity = engine.addEntity();
    Transform.create(entity, { position });
    return TextShape.create(entity, {
        text,
        fontSize: 3,
        outlineWidth: 0.1,
        outlineColor: Color3.Black(),
        textColor
    });
}
function createTextShapes() {
    const regularColor = Color4.create(1, 0.2, 0.8, 0.8);
    const oppositeColor = Color4.create(0.8, 0.2, 1, 0.8);
    createTextShape('Regular, only Y-rotation', Vector3.create(8, 1, 1), regularColor);
    createTextShape('Regular', Vector3.create(12, 1, 1), regularColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 1), regularColor);
    createTextShape('Opposite, only Y', Vector3.create(8, 1, 8), oppositeColor);
    createTextShape('Opposite', Vector3.create(12, 1, 8), oppositeColor);
    createTextShape('Without billboard', Vector3.create(4, 1, 8), oppositeColor);
}
createBillboards();
createTextShapes();
const BouncingBillboard = engine.defineComponent({
    t: Schemas.Number,
    originalPosition: Schemas.Vector3
}, 123123);
engine.addSystem((dt) => {
    for (const [entity] of engine.getEntitiesWith(Billboard, Transform)) {
        if (BouncingBillboard.getOrNull(entity) === null) {
            BouncingBillboard.create(entity, {
                originalPosition: Transform.get(entity).position
            });
        }
        const bounce = BouncingBillboard.getMutable(entity);
        bounce.t += dt;
        Transform.getMutable(entity).position.y = bounce.originalPosition.y + 0.05 * Math.sin(10 * bounce.t);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsTUFBTSxFQUNOLFFBQVEsRUFDUixTQUFTLEVBQ1QsT0FBTyxFQUNQLFlBQVksRUFDWixTQUFTLEVBRVQsU0FBUyxFQUNULE1BQU0sRUFDTixNQUFNLEVBQ04sT0FBTyxFQUNSLE1BQU0sVUFBVSxDQUFBO0FBRWpCLFNBQVMsa0JBQWtCLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO0lBQ3pELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQTtJQUVyQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtRQUMxQixRQUFRLEVBQUU7WUFDUixLQUFLLEVBQUUsS0FBSztZQUNaLEdBQUcsRUFBRTtnQkFDSCxPQUFPLEVBQUU7b0JBQ1AsR0FBRyxFQUFFO3dCQUNILEtBQUssRUFBRSxTQUFTO3dCQUNoQixPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsc0JBQXNCLEVBQUU7cUJBQ3pDO2lCQUNGO2FBQ0Y7U0FDRjtLQUNGLENBQUMsQ0FBQTtJQUNGLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1FBQzNCLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1FBQ3JCLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQy9CLENBQUMsQ0FBQTtJQUNGLFlBQVksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1FBQzlCLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFO2dCQUNMLEdBQUcsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxD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Q29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIGVuZ2luZSxcbiAgTWF0ZXJpYWwsXG4gIFRyYW5zZm9ybSxcbiAgVmVjdG9yMyxcbiAgTWVzaFJlbmRlcmVyLFxuICBCaWxsYm9hcmQsXG4gIEJpbGxib2FyZE1vZGUsXG4gIFRleHRTaGFwZSxcbiAgQ29sb3IzLFxuICBDb2xvcjQsXG4gIFNjaGVtYXNcbn0gZnJvbSAnQGRjbC9lY3MnXG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYW5lVGV4dHVyZSh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKTogRW50aXR5IHtcbiAgY29uc3QgbWVzaEVudGl0eSA9IGVuZ2luZS5hZGRFbnRpdHkoKVxuXG4gIE1hdGVyaWFsLmNyZWF0ZShtZXNoRW50aXR5LCB7XG4gICAgbWF0ZXJpYWw6IHtcbiAgICAgICRjYXNlOiAncGJyJyxcbiAgICAgIHBicjoge1xuICAgICAgICB0ZXh0dXJlOiB7XG4gICAgICAgICAgdGV4OiB7XG4gICAgICAgICAgICAkY2FzZTogJ3RleHR1cmUnLFxuICAgICAgICAgICAgdGV4dHVyZTogeyBzcmM6ICdtb2RlbHMvcG9sYXJvaWQyLnBuZycgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgVHJhbnNmb3JtLmNyZWF0ZShtZXNoRW50aXR5LCB7XG4gICAgcG9zaXRpb246IHsgeCwgeSwgeiB9LFxuICAgIHNjYWxlOiBWZWN0b3IzLmNyZWF0ZSgyLCAyLCAyKVxuICB9KVxuICBNZXNoUmVuZGVyZXIuY3JlYXRlKG1lc2hFbnRpdHksIHtcbiAgICBtZXNoOiB7XG4gICAgICAkY2FzZTogJ3BsYW5lJyxcbiAgICAgIHBsYW5lOiB7XG4gICAgICAgIHV2czogWy4uLkFycmF5LmZyb20oeyBsZW5ndGg6IDQwIH0sICgpID0+IDApLCAwLCAxLCAxLCAxLCAxLCAwLCAwLCAwXVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIG1lc2hFbnRpdHlcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmlsbGJvYXJkcygpIHtcbiAgY29uc3QgcGxhbmUxID0gY3JlYXRlUGxhbmVUZXh0dXJlKDgsIDMsIDEpXG4gIGNvbnN0IHBsYW5lMiA9IGNyZWF0ZVBsYW5lVGV4dHVyZSgxMiwgMywgMSlcbiAgY3JlYXRlUGxhbmVUZXh0dXJlKDQsIDMsIDEpXG5cbiAgY29uc3QgcGxhbmU1ID0gY3JlYXRlUGxhbmVUZXh0dXJlKDgsIDMsIDgpXG4gIGNvbnN0IHBsYW5lNCA9IGNyZWF0ZVBsYW5lVGV4dHVyZSgxMiwgMywgOClcbiAgY3JlYXRlUGxhbmVUZXh0dXJlKDQsIDMsIDgpXG5cbiAgQmlsbGJvYXJkLmNyZWF0ZShwbGFuZTEsIHtcbiAgICBiaWxsYm9hcmRNb2RlOiBCaWxsYm9hcmRNb2RlLkJNX1lfQVhFXG4gIH0pXG4gIEJpbGxib2FyZC5jcmVhdGUocGxhbmUyKVxuICBCaWxsYm9hcmQuY3JlYXRlKHBsYW5lNCwge1xuICAgIG9wcG9zaXRlRGlyZWN0aW9uOiB0cnVlLFxuICAgIGJpbGxib2FyZE1vZGU6IEJpbGxib2FyZE1vZGUuQk1fQUxMX0FYRVNcbiAgfSlcbiAgQmlsbGJvYXJkLmNyZWF0ZShwbGFuZTUsIHtcbiAgICBvcHBvc2l0ZURpcmVjdGlvbjogdHJ1ZSxcbiAgICBiaWxsYm9hcmRNb2RlOiBCaWxsYm9hcmRNb2RlLkJNX1lfQVhFXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHRTaGFwZSh0ZXh0OiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzLCB0ZXh0Q29sb3I6IENvbG9yNCkge1xuICBjb25zdCBlbnRpdHkgPSBlbmdpbmUuYWRkRW50aXR5KClcbiAgVHJhbnNmb3JtLmNyZWF0ZShlbnRpdHksIHsgcG9zaXRpb24gfSlcbiAgcmV0dXJuIFRleHRTaGFwZS5jcmVhdGUoZW50aXR5LCB7XG4gICAgdGV4dCxcbiAgICBmb250U2l6ZTogMyxcbiAgICBvdXRsaW5lV2lkdGg6IDAuMSxcbiAgICBvdXRsaW5lQ29sb3I6IENvbG9yMy5CbGFjaygpLFxuICAgIHRleHRDb2xvclxuICB9KVxufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXh0U2hhcGVzKCkge1xuICBjb25zdCByZWd1bGFyQ29sb3IgPSBDb2xvcjQuY3JlYXRlKDEsIDAuMiwgMC44LCAwLjgpXG4gIGNvbnN0IG9wcG9zaXRlQ29sb3IgPSBDb2xvcjQuY3JlYXRlKDAuOCwgMC4yLCAxLCAwLjgpXG5cbiAgY3JlYXRlVGV4dFNoYXBlKCdSZWd1bGFyLCBvbmx5IFktcm90YXRpb24nLCBWZWN0b3IzLmNyZWF0ZSg4LCAxLCAxKSwgcmVndWxhckNvbG9yKVxuICBjcmVhdGVUZXh0U2hhcGUoJ1JlZ3VsYXInLCBWZWN0b3IzLmNyZWF0ZSgxMiwgMSwgMSksIHJlZ3VsYXJDb2xvcilcbiAgY3JlYXRlVGV4dFNoYXBlKCdXaXRob3V0IGJpbGxib2FyZCcsIFZlY3RvcjMuY3JlYXRlKDQsIDEsIDEpLCByZWd1bGFyQ29sb3IpXG4gIGNyZWF0ZVRleHRTaGFwZSgnT3Bwb3NpdGUsIG9ubHkgWScsIFZlY3RvcjMuY3JlYXRlKDgsIDEsIDgpLCBvcHBvc2l0ZUNvbG9yKVxuICBjcmVhdGVUZXh0U2hhcGUoJ09wcG9zaXRlJywgVmVjdG9yMy5jcmVhdGUoMTIsIDEsIDgpLCBvcHBvc2l0ZUNvbG9yKVxuICBjcmVhdGVUZXh0U2hhcGUoJ1dpdGhvdXQgYmlsbGJvYXJkJywgVmVjdG9yMy5jcmVhdGUoNCwgMSwgOCksIG9wcG9zaXRlQ29sb3IpXG59XG5cbmNyZWF0ZUJpbGxib2FyZHMoKVxuY3JlYXRlVGV4dFNoYXBlcygpXG5cbmNvbnN0IEJvdW5jaW5nQmlsbGJvYXJkID0gZW5naW5lLmRlZmluZUNvbXBvbmVudChcbiAge1xuICAgIHQ6IFNjaGVtYXMuTnVtYmVyLFxuICAgIG9yaWdpbmFsUG9zaXRpb246IFNjaGVtYXMuVmVjdG9yM1xuICB9LFxuICAxMjMxMjNcbilcblxuZW5naW5lLmFkZFN5c3RlbSgoZHQ6IG51bWJlcikgPT4ge1xuICBmb3IgKGNvbnN0IFtlbnRpdHldIG9mIGVuZ2luZS5nZXRFbnRpdGllc1dpdGgoQmlsbGJvYXJkLCBUcmFuc2Zvcm0pKSB7XG4gICAgaWYgKEJvdW5jaW5nQmlsbGJvYXJkLmdldE9yTnVsbChlbnRpdHkpID09PSBudWxsKSB7XG4gICAgICBCb3VuY2luZ0JpbGxib2FyZC5jcmVhdGUoZW50aXR5LCB7XG4gICAgICAgIG9yaWdpbmFsUG9zaXRpb246IFRyYW5zZm9ybS5nZXQoZW50aXR5KS5wb3NpdGlvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBib3VuY2UgPSBCb3VuY2luZ0JpbGxib2FyZC5nZXRNdXRhYmxlKGVudGl0eSlcbiAgICBib3VuY2UudCArPSBkdFxuXG4gICAgVHJhbnNmb3JtLmdldE11dGFibGUoZW50aXR5KS5wb3NpdGlvbi55ID0gYm91bmNlLm9yaWdpbmFsUG9zaXRpb24ueSArIDAuMDUgKiBNYXRoLnNpbigxMCAqIGJvdW5jZS50KVxuICB9XG59KVxuIl19